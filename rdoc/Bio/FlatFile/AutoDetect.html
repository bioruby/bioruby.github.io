<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Bio::FlatFile::AutoDetect - BioRuby API documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../../Object.html">Object</a>
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><span class="include">TSort</span>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-5B-5D">::[]</a>
    
    <li ><a href="#method-c-default">::default</a>
    
    <li ><a href="#method-c-default-3D">::default=</a>
    
    <li ><a href="#method-c-make_default">::make_default</a>
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-add">#add</a>
    
    <li ><a href="#method-i-autodetect">#autodetect</a>
    
    <li ><a href="#method-i-autodetect_flatfile">#autodetect_flatfile</a>
    
    <li ><a href="#method-i-each_rule">#each_rule</a>
    
    <li ><a href="#method-i-elements">#elements</a>
    
    <li ><a href="#method-i-inspect">#inspect</a>
    
    <li ><a href="#method-i-rehash">#rehash</a>
    
    <li ><a href="#method-i-tsort_each_child">#tsort_each_child</a>
    
    <li ><a href="#method-i-tsort_each_node">#tsort_each_node</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Bio::FlatFile::AutoDetect">
  <h1 id="class-Bio::FlatFile::AutoDetect" class="class">
    class Bio::FlatFile::AutoDetect
  </h1>

  <section class="description">
    
<p><a href="AutoDetect.html">AutoDetect</a> automatically determines database
class of given data.</p>

  </section>

  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="BottomRule">BottomRule
        
        <dd><p>Special element that is always bottom priority.</p>
        
      
        <dt id="TopRule">TopRule
        
        <dd><p>Special element that is always top priority.</p>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-5B-5D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">[]</span><span
            class="method-args">(*arg)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>make a new autodetect object</p>
          
          

          
          <div class="method-source-code" id="5B-5D-source">
            <pre><span class="ruby-comment"># File lib/bio/io/flatfile/autodetection.rb, line 361</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">[]</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">arg</span>)
  <span class="ruby-identifier">a</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">add</span>(<span class="ruby-identifier">e</span>) }
  <span class="ruby-identifier">a</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-default" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">default</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>returns the default autodetect object</p>
          
          

          
          <div class="method-source-code" id="default-source">
            <pre><span class="ruby-comment"># File lib/bio/io/flatfile/autodetection.rb, line 348</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">default</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@default</span> <span class="ruby-keyword">then</span>
    <span class="ruby-ivar">@default</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">make_default</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@default</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-default-3D" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">default=</span><span
            class="method-args">(ad)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>sets the default autodetect object.</p>
          
          

          
          <div class="method-source-code" id="default-3D-source">
            <pre><span class="ruby-comment"># File lib/bio/io/flatfile/autodetection.rb, line 356</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">default=</span>(<span class="ruby-identifier">ad</span>)
  <span class="ruby-ivar">@default</span> = <span class="ruby-identifier">ad</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-make_default" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">make_default</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>make a default of default autodetect object</p>
          
          

          
          <div class="method-source-code" id="make_default-source">
            <pre><span class="ruby-comment"># File lib/bio/io/flatfile/autodetection.rb, line 368</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier ruby-title">make_default</span>
  <span class="ruby-identifier">a</span> = <span class="ruby-keyword">self</span>[
    <span class="ruby-identifier">genbank</span>  = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::GenBank&#39;</span>,
      <span class="ruby-regexp">/^LOCUS       .+ bp .*[a-z]*[DR]?NA/</span> ],
    <span class="ruby-identifier">genpept</span>  = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::GenPept&#39;</span>,
      <span class="ruby-regexp">/^LOCUS       .+ aa .+/</span> ],
    <span class="ruby-identifier">medline</span>  = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::MEDLINE&#39;</span>,
      <span class="ruby-regexp">/^PMID\- [0-9]+$/</span> ],
    <span class="ruby-identifier">embl</span>     = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::EMBL&#39;</span>,
      <span class="ruby-regexp">/^ID   .+\; .*(DNA|RNA|XXX)\;/</span> ],
    <span class="ruby-identifier">sptr</span>     = <span class="ruby-constant">RuleRegexp2</span>[ <span class="ruby-string">&#39;Bio::SPTR&#39;</span>,
      <span class="ruby-regexp">/^ID   .+\; *PRT\;/</span>,
      <span class="ruby-regexp">/^ID   [-A-Za-z0-9_\.]+ .+\; *[0-9]+ *AA\./</span> ],
    <span class="ruby-identifier">prosite</span>  = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::PROSITE&#39;</span>,
      <span class="ruby-regexp">/^ID   [-A-Za-z0-9_\.]+\; (PATTERN|RULE|MATRIX)\.$/</span> ],
    <span class="ruby-identifier">transfac</span> = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::TRANSFAC&#39;</span>,
      <span class="ruby-regexp">/^AC  [-A-Za-z0-9_\.]+$/</span> ],

    <span class="ruby-identifier">aaindex</span>  = <span class="ruby-constant">RuleProc</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;Bio::AAindex1&#39;</span>, <span class="ruby-string">&#39;Bio::AAindex2&#39;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">text</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-regexp">/^H [-A-Z0-9_\.]+$/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">text</span> <span class="ruby-keyword">then</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^M [rc]/</span> <span class="ruby-keyword">then</span>
          <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">AAindex2</span>
        <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">/^I    A\/L/</span> <span class="ruby-keyword">then</span>
          <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">AAindex1</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-keyword">false</span> <span class="ruby-comment">#fail to determine</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>,

    <span class="ruby-identifier">litdb</span>    = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::LITDB&#39;</span>,
      <span class="ruby-regexp">/^CODE        [0-9]+$/</span> ],
    <span class="ruby-identifier">pathway_module</span> = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::KEGG::MODULE&#39;</span>,
      <span class="ruby-regexp">/^ENTRY       .+ Pathway\s+Module\s*/</span> ],
    <span class="ruby-identifier">pathway</span>  = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::KEGG::PATHWAY&#39;</span>,
      <span class="ruby-regexp">/^ENTRY       .+ Pathway\s*/</span> ],
    <span class="ruby-identifier">brite</span>    = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::KEGG::BRITE&#39;</span>,
      <span class="ruby-regexp">/^Entry           [A-Z0-9]+/</span> ],
    <span class="ruby-identifier">orthology</span> = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::KEGG::ORTHOLOGY&#39;</span>,
      <span class="ruby-regexp">/^ENTRY       .+ KO\s*/</span> ],
    <span class="ruby-identifier">drug</span>     = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::KEGG::DRUG&#39;</span>,
      <span class="ruby-regexp">/^ENTRY       .+ Drug\s*/</span> ],
    <span class="ruby-identifier">glycan</span>   = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::KEGG::GLYCAN&#39;</span>,
      <span class="ruby-regexp">/^ENTRY       .+ Glycan\s*/</span> ],
    <span class="ruby-identifier">enzyme</span>   = <span class="ruby-constant">RuleRegexp2</span>[ <span class="ruby-string">&#39;Bio::KEGG::ENZYME&#39;</span>,
      <span class="ruby-regexp">/^ENTRY       EC [0-9\.]+$/</span>,
      <span class="ruby-regexp">/^ENTRY       .+ Enzyme\s*/</span>
    ],
    <span class="ruby-identifier">compound</span> = <span class="ruby-constant">RuleRegexp2</span>[ <span class="ruby-string">&#39;Bio::KEGG::COMPOUND&#39;</span>,
      <span class="ruby-regexp">/^ENTRY       C[A-Za-z0-9\._]+$/</span>,
      <span class="ruby-regexp">/^ENTRY       .+ Compound\s*/</span>
    ],
    <span class="ruby-identifier">reaction</span> = <span class="ruby-constant">RuleRegexp2</span>[ <span class="ruby-string">&#39;Bio::KEGG::REACTION&#39;</span>,
      <span class="ruby-regexp">/^ENTRY       R[A-Za-z0-9\._]+$/</span>,
      <span class="ruby-regexp">/^ENTRY       .+ Reaction\s*/</span>
    ],
    <span class="ruby-identifier">genes</span>    = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::KEGG::GENES&#39;</span>,
      <span class="ruby-regexp">/^ENTRY       .+ (CDS|gene|.*RNA|Contig) /</span> ],
    <span class="ruby-identifier">genome</span>   = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::KEGG::GENOME&#39;</span>,
      <span class="ruby-regexp">/^ENTRY       [a-z]+$/</span> ],

    <span class="ruby-identifier">fantom</span> = <span class="ruby-constant">RuleProc</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;Bio::FANTOM::MaXML::Cluster&#39;</span>,
                          <span class="ruby-string">&#39;Bio::FANTOM::MaXML::Sequence&#39;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">text</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-regexp">/\&lt;\!DOCTYPE\s+maxml\-(sequences|clusters)\s+SYSTEM/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">text</span>
        <span class="ruby-keyword">case</span> <span class="ruby-node">$1</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;clusters&#39;</span>
          <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">FANTOM</span><span class="ruby-operator">::</span><span class="ruby-constant">MaXML</span><span class="ruby-operator">::</span><span class="ruby-constant">Cluster</span>
        <span class="ruby-keyword">when</span> <span class="ruby-string">&#39;sequences&#39;</span>
          <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">FANTOM</span><span class="ruby-operator">::</span><span class="ruby-constant">MaXML</span><span class="ruby-operator">::</span><span class="ruby-constant">Sequence</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-keyword">nil</span> <span class="ruby-comment">#unknown</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>,

    <span class="ruby-identifier">pdb</span> = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::PDB&#39;</span>,
      <span class="ruby-regexp">/^HEADER    .{40}\d\d\-[A-Z]{3}\-\d\d   [0-9A-Z]{4}/</span> ],
    <span class="ruby-identifier">het</span> = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::PDB::ChemicalComponent&#39;</span>,
      <span class="ruby-regexp">/^RESIDUE +.+ +\d+\s*$/</span> ],

    <span class="ruby-identifier">clustal</span> = <span class="ruby-constant">RuleRegexp2</span>[ <span class="ruby-string">&#39;Bio::ClustalW::Report&#39;</span>,
    <span class="ruby-regexp">/^CLUSTAL .*\(.*\).*sequence +alignment/</span>,
    <span class="ruby-regexp">/^CLUSTAL FORMAT for T-COFFEE/</span> ],

    <span class="ruby-identifier">gcg_msf</span> = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::GCG::Msf&#39;</span>,
    <span class="ruby-regexp">/^!!(N|A)A_MULTIPLE_ALIGNMENT .+/</span> ],

    <span class="ruby-identifier">gcg_seq</span> = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::GCG::Seq&#39;</span>,
    <span class="ruby-regexp">/^!!(N|A)A_SEQUENCE .+/</span> ],

    <span class="ruby-identifier">blastxml</span> = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::Blast::Report&#39;</span>,
      <span class="ruby-regexp">/\&lt;\!DOCTYPE BlastOutput PUBLIC /</span> ],
    <span class="ruby-identifier">wublast</span>  = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::Blast::WU::Report&#39;</span>,
      <span class="ruby-regexp">/^BLAST.? +[\-\.\w]+\-WashU +\[[\-\.\w ]+\]/</span> ],
    <span class="ruby-identifier">wutblast</span> = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::Blast::WU::Report_TBlast&#39;</span>,
      <span class="ruby-regexp">/^TBLAST.? +[\-\.\w]+\-WashU +\[[\-\.\w ]+\]/</span> ],
    <span class="ruby-identifier">blast</span>    = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::Blast::Default::Report&#39;</span>,
      <span class="ruby-regexp">/^BLAST.? +[\-\.\w]+ +\[[\-\.\w ]+\]/</span> ],
    <span class="ruby-identifier">tblast</span>   = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::Blast::Default::Report_TBlast&#39;</span>,
      <span class="ruby-regexp">/^TBLAST.? +[\-\.\w]+ +\[[\-\.\w ]+\]/</span> ],
    <span class="ruby-identifier">rpsblast</span>   = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::Blast::RPSBlast::Report&#39;</span>,
      <span class="ruby-regexp">/^RPS\-BLAST.? +[\-\.\w]+ +\[[\-\.\w ]+\]/</span> ],

    <span class="ruby-identifier">blat</span>   = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::Blat::Report&#39;</span>,
      <span class="ruby-regexp">/^psLayout version \d+/</span> ],
    <span class="ruby-identifier">spidey</span> = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::Spidey::Report&#39;</span>,
      <span class="ruby-regexp">/^\-\-SPIDEY version .+\-\-$/</span> ],
    <span class="ruby-identifier">hmmer</span>  = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::HMMER::Report&#39;</span>,
      <span class="ruby-regexp">/^HMMER +\d+\./</span> ],
    <span class="ruby-identifier">sim4</span>   = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::Sim4::Report&#39;</span>,
      <span class="ruby-regexp">/^seq1 \= .*\, \d+ bp(\r|\r?\n)seq2 \= .*\, \d+ bp(\r|\r?\n)/</span> ],

    <span class="ruby-identifier">fastq</span>  = <span class="ruby-constant">RuleRegexp</span>[ <span class="ruby-string">&#39;Bio::Fastq&#39;</span>,
      <span class="ruby-regexp">/^\@.+(?:\r|\r?\n)(?:[^\@\+].*(?:\r|\r?\n))+/</span> ],

    <span class="ruby-identifier">fastaformat</span> = <span class="ruby-constant">RuleProc</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;Bio::FastaFormat&#39;</span>,
                               <span class="ruby-string">&#39;Bio::NBRF&#39;</span>,
                               <span class="ruby-string">&#39;Bio::FastaNumericFormat&#39;</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">text</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-regexp">/^&gt;.+$/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">text</span>
        <span class="ruby-keyword">case</span> <span class="ruby-identifier">text</span>
        <span class="ruby-keyword">when</span> <span class="ruby-regexp">/^&gt;([PF]1|[DR][LC]|N[13]|XX)\;.+/</span>
          <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">NBRF</span>
        <span class="ruby-keyword">when</span> <span class="ruby-regexp">/^&gt;.+$\s+(^\#.*$\s*)*^\s*\d*\s*[-a-zA-Z_\.\[\]\(\)\*\+\$]+/</span>
            <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">FastaFormat</span>
        <span class="ruby-keyword">when</span> <span class="ruby-regexp">/^&gt;.+$\s+^\s*\d+(\s+\d+)*\s*$/</span>
          <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">FastaNumericFormat</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-keyword">false</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-keyword">nil</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  ]

  <span class="ruby-comment"># dependencies</span>
  <span class="ruby-comment"># NCBI</span>
  <span class="ruby-identifier">genbank</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">genpept</span>
  <span class="ruby-comment"># EMBL/UniProt</span>
  <span class="ruby-identifier">embl</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">sptr</span>
  <span class="ruby-identifier">sptr</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">prosite</span>
  <span class="ruby-identifier">prosite</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">transfac</span>
  <span class="ruby-comment"># KEGG</span>
  <span class="ruby-comment">#aaindex.is_prior_to litdb</span>
  <span class="ruby-comment">#litdb.is_prior_to brite</span>
  <span class="ruby-identifier">pathway_module</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">pathway</span>
  <span class="ruby-identifier">pathway</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">brite</span>
  <span class="ruby-identifier">brite</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">orthology</span>
  <span class="ruby-identifier">orthology</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">drug</span>
  <span class="ruby-identifier">drug</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">glycan</span>
  <span class="ruby-identifier">glycan</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">enzyme</span>
  <span class="ruby-identifier">enzyme</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">compound</span>
  <span class="ruby-identifier">compound</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">reaction</span>
  <span class="ruby-identifier">reaction</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">genes</span>
  <span class="ruby-identifier">genes</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">genome</span>
  <span class="ruby-comment"># PDB</span>
  <span class="ruby-identifier">pdb</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">het</span>
  <span class="ruby-comment"># BLAST</span>
  <span class="ruby-identifier">wublast</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">wutblast</span>
  <span class="ruby-identifier">wutblast</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">blast</span>
  <span class="ruby-identifier">blast</span>.<span class="ruby-identifier">is_prior_to</span> <span class="ruby-identifier">tblast</span>
  <span class="ruby-comment"># Fastq</span>
  <span class="ruby-constant">BottomRule</span>.<span class="ruby-identifier">is_prior_to</span>(<span class="ruby-identifier">fastq</span>)
  <span class="ruby-identifier">fastq</span>.<span class="ruby-identifier">is_prior_to</span>(<span class="ruby-identifier">fastaformat</span>)
  <span class="ruby-comment"># FastaFormat</span>
  <span class="ruby-constant">BottomRule</span>.<span class="ruby-identifier">is_prior_to</span>(<span class="ruby-identifier">fastaformat</span>)

  <span class="ruby-comment"># for debug</span>
  <span class="ruby-comment">#debug_first = RuleDebug.new(&#39;debug_first&#39;)</span>
  <span class="ruby-comment">#a.add(debug_first)</span>
  <span class="ruby-comment">#debug_first.is_prior_to(TopRule)</span>

  <span class="ruby-comment">## for debug</span>
  <span class="ruby-comment">#debug_last = RuleDebug.new(&#39;debug_last&#39;)</span>
  <span class="ruby-comment">#a.add(debug_last)</span>
  <span class="ruby-comment">#BottomRule.is_prior_to(debug_last)</span>
  <span class="ruby-comment">#fastaformat.is_prior_to(debug_last)</span>

  <span class="ruby-comment">## for suppressing warnings</span>
  <span class="ruby-identifier">p</span> <span class="ruby-identifier">medline</span>, <span class="ruby-identifier">aaindex</span>, <span class="ruby-identifier">litdb</span>, <span class="ruby-identifier">fantom</span>, <span class="ruby-identifier">clustal</span>,
    <span class="ruby-identifier">gcg_msf</span>, <span class="ruby-identifier">gcg_seq</span>, <span class="ruby-identifier">blastxml</span>, <span class="ruby-identifier">rpsblast</span>, <span class="ruby-identifier">blat</span>,
    <span class="ruby-identifier">spidey</span>, <span class="ruby-identifier">hmmer</span>, <span class="ruby-identifier">sim4</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">false</span>

  <span class="ruby-identifier">a</span>.<span class="ruby-identifier">rehash</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">a</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates a new Autodetect object</p>
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/bio/io/flatfile/autodetection.rb, line 226</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>
  <span class="ruby-comment"># stores autodetection rules.</span>
  <span class="ruby-ivar">@rules</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-comment"># stores elements (cache)</span>
  <span class="ruby-ivar">@elements</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">add</span>(<span class="ruby-constant">TopRule</span>)
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">add</span>(<span class="ruby-constant">BottomRule</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-add" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add</span><span
            class="method-args">(elem)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds a new element. Returns <em>elem</em>.</p>
          
          

          
          <div class="method-source-code" id="add-source">
            <pre><span class="ruby-comment"># File lib/bio/io/flatfile/autodetection.rb, line 237</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">add</span>(<span class="ruby-identifier">elem</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&#39;element name conflicts&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@rules</span>[<span class="ruby-identifier">elem</span>.<span class="ruby-identifier">name</span>]
  <span class="ruby-ivar">@elements</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@rules</span>[<span class="ruby-identifier">elem</span>.<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">elem</span>
  <span class="ruby-identifier">elem</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-autodetect" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">autodetect</span><span
            class="method-args">(text, meta = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Autodetect from the text. Returns a database class if succeeded. Returns
nil if failed.</p>
          
          

          
          <div class="method-source-code" id="autodetect-source">
            <pre><span class="ruby-comment"># File lib/bio/io/flatfile/autodetection.rb, line 305</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">autodetect</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">meta</span> = {})
  <span class="ruby-identifier">r</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
    <span class="ruby-comment">#$stderr.puts e.name</span>
    <span class="ruby-identifier">r</span> = <span class="ruby-identifier">e</span>.<span class="ruby-identifier">guess</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">meta</span>)
    <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">r</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">r</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-autodetect_flatfile" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">autodetect_flatfile</span><span
            class="method-args">(ff, lines = 31)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>autodetect from the <a href="../FlatFile.html">FlatFile</a> object. Returns
a database class if succeeded. Returns nil if failed.</p>
          
          

          
          <div class="method-source-code" id="autodetect_flatfile-source">
            <pre><span class="ruby-comment"># File lib/bio/io/flatfile/autodetection.rb, line 318</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">autodetect_flatfile</span>(<span class="ruby-identifier">ff</span>, <span class="ruby-identifier">lines</span> = <span class="ruby-value">31</span>)
  <span class="ruby-identifier">meta</span> = {}
  <span class="ruby-identifier">stream</span> = <span class="ruby-identifier">ff</span>.<span class="ruby-identifier">instance_eval</span> { <span class="ruby-ivar">@stream</span> }
  <span class="ruby-keyword">begin</span>
    <span class="ruby-identifier">path</span> = <span class="ruby-identifier">stream</span>.<span class="ruby-identifier">path</span>
  <span class="ruby-keyword">rescue</span> <span class="ruby-constant">NameError</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">path</span> <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">meta</span>[<span class="ruby-value">:path</span>] = <span class="ruby-identifier">path</span>
    <span class="ruby-comment"># call autodetect onece with meta and without any read action</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">r</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">autodetect</span>(<span class="ruby-identifier">stream</span>.<span class="ruby-identifier">prefetch_buffer</span>, <span class="ruby-identifier">meta</span>)
      <span class="ruby-keyword">return</span> <span class="ruby-identifier">r</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># reading stream</span>
  <span class="ruby-value">1</span>.<span class="ruby-identifier">upto</span>(<span class="ruby-identifier">lines</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">break</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">line</span> = <span class="ruby-identifier">stream</span>.<span class="ruby-identifier">prefetch_gets</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">r</span> = <span class="ruby-keyword">self</span>.<span class="ruby-identifier">autodetect</span>(<span class="ruby-identifier">stream</span>.<span class="ruby-identifier">prefetch_buffer</span>, <span class="ruby-identifier">meta</span>)
        <span class="ruby-keyword">return</span> <span class="ruby-identifier">r</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-each_rule" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">each_rule</span><span
            class="method-args">() { |elem| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Iterates over each element.</p>
          
          

          
          <div class="method-source-code" id="each_rule-source">
            <pre><span class="ruby-comment"># File lib/bio/io/flatfile/autodetection.rb, line 298</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">each_rule</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">x</span>) <span class="ruby-comment">#:yields: elem</span>
  <span class="ruby-identifier">elements</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">x</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-elements" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">elements</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns current elements as an array whose order fulfills all elements&#39;
priorities.</p>
          
          

          
          <div class="method-source-code" id="elements-source">
            <pre><span class="ruby-comment"># File lib/bio/io/flatfile/autodetection.rb, line 275</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">elements</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@elements</span>
    <span class="ruby-identifier">ary</span> = <span class="ruby-identifier">tsort</span>
    <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">reverse!</span>
    <span class="ruby-ivar">@elements</span> = <span class="ruby-identifier">ary</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@elements</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-inspect" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">inspect</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>visualizes the object (mainly for debug)</p>
          
          

          
          <div class="method-source-code" id="inspect-source">
            <pre><span class="ruby-comment"># File lib/bio/io/flatfile/autodetection.rb, line 291</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">inspect</span>
  <span class="ruby-node">&quot;&lt;#{self.class.to_s} &quot;</span> <span class="ruby-operator">+</span>
    <span class="ruby-keyword">self</span>.<span class="ruby-identifier">elements</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">inspect</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-string">&#39; &#39;</span>) <span class="ruby-operator">+</span>
    <span class="ruby-string">&quot;&gt;&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-rehash" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">rehash</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>rebuilds the object and clears internal cache.</p>
          
          

          
          <div class="method-source-code" id="rehash-source">
            <pre><span class="ruby-comment"># File lib/bio/io/flatfile/autodetection.rb, line 285</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">rehash</span>
  <span class="ruby-ivar">@rules</span>.<span class="ruby-identifier">rehash</span>
  <span class="ruby-ivar">@elements</span> = <span class="ruby-keyword">nil</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-tsort_each_child" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">tsort_each_child</span><span
            class="method-args">(elem) { |e| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>(required by TSort.) For a given element, yields each child (= lower
priority elements) of the element.</p>
          
          

          
          <div class="method-source-code" id="tsort_each_child-source">
            <pre><span class="ruby-comment"># File lib/bio/io/flatfile/autodetection.rb, line 253</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">tsort_each_child</span>(<span class="ruby-identifier">elem</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">elem</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TopRule</span> <span class="ruby-keyword">then</span>
    <span class="ruby-ivar">@rules</span>.<span class="ruby-identifier">each_value</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">e</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">e</span> <span class="ruby-operator">==</span> <span class="ruby-constant">TopRule</span> <span class="ruby-keyword">or</span> 
        <span class="ruby-identifier">e</span>.<span class="ruby-identifier">lower_priority_elements</span>.<span class="ruby-identifier">index</span>(<span class="ruby-constant">TopRule</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">elem</span> <span class="ruby-operator">==</span> <span class="ruby-constant">BottomRule</span> <span class="ruby-keyword">then</span>
    <span class="ruby-ivar">@rules</span>.<span class="ruby-identifier">each_value</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">e</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">higher_priority_elements</span>.<span class="ruby-identifier">index</span>(<span class="ruby-constant">BottomRule</span>)
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">elem</span>.<span class="ruby-identifier">lower_priority_elements</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">yield</span> <span class="ruby-identifier">e</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">e</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">BottomRule</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">elem</span>.<span class="ruby-identifier">higher_priority_elements</span>.<span class="ruby-identifier">index</span>(<span class="ruby-constant">BottomRule</span>)
      <span class="ruby-keyword">yield</span> <span class="ruby-constant">BottomRule</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-tsort_each_node" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">tsort_each_node</span><span
            class="method-args">(&amp;x)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>(required by TSort.) For all elements, yields each element.</p>
          
          

          
          <div class="method-source-code" id="tsort_each_node-source">
            <pre><span class="ruby-comment"># File lib/bio/io/flatfile/autodetection.rb, line 246</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">tsort_each_node</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">x</span>)
  <span class="ruby-ivar">@rules</span>.<span class="ruby-identifier">each_value</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">x</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.0.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

