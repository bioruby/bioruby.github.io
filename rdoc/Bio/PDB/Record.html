<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Bio::PDB::Record - BioRuby API documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Struct
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="DataType.html">Bio::PDB::DataType</a>
  
  
  </ul>
</div>

    <div id="extends-section" class="nav-section">
  <h3>Extended With Modules</h3>

  <ul class="link-list">
    
  
    <li><a class="extend" href="DataType/ConstLikeMethod.html">Bio::PDB::DataType::ConstLikeMethod</a>
  
  
  </ul>
</div>

    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-continue-3F">::continue?</a>
    
    <li ><a href="#method-c-create_definition_hash">::create_definition_hash</a>
    
    <li class="calls-super" ><a href="#method-c-def_rec">::def_rec</a>
    
    <li ><a href="#method-c-get_record_class">::get_record_class</a>
    
    <li class="calls-super" ><a href="#method-c-new_direct">::new_direct</a>
    
    <li ><a href="#method-c-new_inherit">::new_inherit</a>
    
    <li ><a href="#method-c-symbols">::symbols</a>
    
    <li ><a href="#method-i-add_continuation">#add_continuation</a>
    
    <li ><a href="#method-i-continue-3F">#continue?</a>
    
    <li ><a href="#method-i-do_parse">#do_parse</a>
    
    <li ><a href="#method-i-each_symbol">#each_symbol</a>
    
    <li ><a href="#method-i-initialize_from_string">#initialize_from_string</a>
    
    <li class="calls-super" ><a href="#method-i-inspect">#inspect</a>
    
    <li ><a href="#method-i-original_data">#original_data</a>
    
    <li ><a href="#method-i-record_name">#record_name</a>
    
    <li ><a href="#method-i-record_type">#record_type</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Bio::PDB::Record">
  <h1 id="class-Bio::PDB::Record" class="class">
    class Bio::PDB::Record
  </h1>

  <section class="description">
    
<p>The ancestor of every single <a href="../PDB.html">PDB</a> record class. It
inherits <code>Struct</code> class. Basically, each line of a <a
href="../PDB.html">PDB</a> file corresponds to an instance of each
corresponding child class. If continuation exists, multiple lines may
correspond to single instance.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    
    <section class="constants-list">
      <header>
        <h3>Constants</h3>
      </header>
      <dl>
      
        <dt id="ANISOU">ANISOU
        
        <dd><p><a href="Record/ANISOU.html">ANISOU</a> record class</p>
        
      
        <dt id="ATOM">ATOM
        
        <dd><p><a href="Record/ATOM.html">ATOM</a> record class</p>
        
      
        <dt id="AUTHOR">AUTHOR
        
        <dd><p><a href="Record.html#AUTHOR">AUTHOR</a> record class</p>
        
      
        <dt id="CAVEAT">CAVEAT
        
        <dd><p><a href="Record.html#CAVEAT">CAVEAT</a> record class</p>
        
      
        <dt id="CISPEP">CISPEP
        
        <dd><p><a href="Record.html#CISPEP">CISPEP</a> record class</p>
        
      
        <dt id="COMPND">COMPND
        
        <dd><p><a href="Record.html#COMPND">COMPND</a> record class</p>
        
      
        <dt id="CONECT">CONECT
        
        <dd><p><a href="Record.html#CONECT">CONECT</a> record class</p>
        
      
        <dt id="CRYST1">CRYST1
        
        <dd><p><a href="Record.html#CRYST1">CRYST1</a> record class</p>
        
      
        <dt id="DBREF">DBREF
        
        <dd><p><a href="Record.html#DBREF">DBREF</a> record class</p>
        
      
        <dt id="Default">Default
        
        <dd><p>default (or unknown) record class</p>
        
      
        <dt id="Definition">Definition
        
        <dd><p>definitions (hash)</p>
        
      
        <dt id="ENDMDL">ENDMDL
        
        <dd><p><a href="Record.html#ENDMDL">ENDMDL</a> record class</p>
        
      
        <dt id="EXPDTA">EXPDTA
        
        <dd><p><a href="Record.html#EXPDTA">EXPDTA</a> record class</p>
        
      
        <dt id="End">End
        
        <dd><p>END record class.</p>

<p>Because END is a reserved word of Ruby, it is separately added to the hash</p>
        
      
        <dt id="FORMUL">FORMUL
        
        <dd><p><a href="Record.html#FORMUL">FORMUL</a> record class</p>
        
      
        <dt id="HEADER">HEADER
        
        <dd><p><a href="Record.html#HEADER">HEADER</a> record class</p>
        
      
        <dt id="HELIX">HELIX
        
        <dd><p><a href="Record.html#HELIX">HELIX</a> record class</p>
        
      
        <dt id="HET">HET
        
        <dd><p><a href="Record.html#HET">HET</a> record class</p>
        
      
        <dt id="HETATM">HETATM
        
        <dd><p><a href="Record/HETATM.html">HETATM</a> record class</p>
        
      
        <dt id="HETNAM">HETNAM
        
        <dd><p><a href="Record.html#HETNAM">HETNAM</a> record class</p>
        
      
        <dt id="HETSYN">HETSYN
        
        <dd><p><a href="Record.html#HETSYN">HETSYN</a> record class</p>
        
      
        <dt id="HYDBND">HYDBND
        
        <dd><p><a href="Record.html#HYDBND">HYDBND</a> record class</p>
        
      
        <dt id="JRNL">JRNL
        
        <dd><p>&#39;JRNL&#39; is defined below</p>
        
      
        <dt id="KEYWDS">KEYWDS
        
        <dd><p><a href="Record.html#KEYWDS">KEYWDS</a> record class</p>
        
      
        <dt id="LINK">LINK
        
        <dd><p><a href="Record.html#LINK">LINK</a> record class</p>
        
      
        <dt id="MASTER">MASTER
        
        <dd><p><a href="Record.html#MASTER">MASTER</a> record class</p>
        
      
        <dt id="MODEL">MODEL
        
        <dd><p><a href="Record.html#MODEL">MODEL</a> record class</p>
        
      
        <dt id="MODRES">MODRES
        
        <dd><p>MODRS record class</p>
        
      
        <dt id="MTRIX1">MTRIX1
        
        <dd><p><a href="Record.html#MTRIX1">MTRIX1</a> record class</p>

<p>MTRIXn n=1,2, or 3</p>
        
      
        <dt id="MTRIX2">MTRIX2
        
        <dd><p><a href="Record.html#MTRIX2">MTRIX2</a> record class</p>
        
      
        <dt id="MTRIX3">MTRIX3
        
        <dd><p><a href="Record.html#MTRIX3">MTRIX3</a> record class</p>
        
      
        <dt id="OBSLTE">OBSLTE
        
        <dd><p><a href="Record.html#OBSLTE">OBSLTE</a> record class</p>
        
      
        <dt id="ORIGX1">ORIGX1
        
        <dd><p><a href="Record.html#ORIGX1">ORIGX1</a> record class</p>

<p>ORIGXn n=1, 2, or 3</p>
        
      
        <dt id="ORIGX2">ORIGX2
        
        <dd><p><a href="Record.html#ORIGX2">ORIGX2</a> record class</p>
        
      
        <dt id="ORIGX3">ORIGX3
        
        <dd><p><a href="Record.html#ORIGX3">ORIGX3</a> record class</p>
        
      
        <dt id="REMARK">REMARK
        
        <dd><p>&#39;REMARK&#39; is defined below</p>
        
      
        <dt id="REVDAT">REVDAT
        
        <dd><p><a href="Record.html#REVDAT">REVDAT</a> record class</p>
        
      
        <dt id="RemarkN">RemarkN
        
        <dd><p><a href="Record.html#REMARK">REMARK</a> record class for <a
href="Record.html#REMARK">REMARK</a> n (n&gt;=3)</p>
        
      
        <dt id="SCALE1">SCALE1
        
        <dd><p><a href="Record.html#SCALE1">SCALE1</a> record class</p>

<p>SCALEn n=1, 2, or 3</p>
        
      
        <dt id="SCALE2">SCALE2
        
        <dd><p><a href="Record.html#SCALE2">SCALE2</a> record class</p>
        
      
        <dt id="SCALE3">SCALE3
        
        <dd><p><a href="Record.html#SCALE3">SCALE3</a> record class</p>
        
      
        <dt id="SEQADV">SEQADV
        
        <dd><p><a href="Record.html#SEQADV">SEQADV</a> record class</p>
        
      
        <dt id="SEQRES">SEQRES
        
        <dd><p><a href="Record.html#SEQRES">SEQRES</a> record class</p>
        
      
        <dt id="SHEET">SHEET
        
        <dd><p><a href="Record.html#SHEET">SHEET</a> record class</p>
        
      
        <dt id="SIGATM">SIGATM
        
        <dd><p><a href="Record.html#SIGATM">SIGATM</a> record class</p>
        
      
        <dt id="SIGUIJ">SIGUIJ
        
        <dd><p><a href="Record.html#SIGUIJ">SIGUIJ</a> record class</p>
        
      
        <dt id="SITE">SITE
        
        <dd><p><a href="Record.html#SITE">SITE</a> record class</p>
        
      
        <dt id="SLTBRG">SLTBRG
        
        <dd><p><a href="Record.html#SLTBRG">SLTBRG</a> record class</p>
        
      
        <dt id="SOURCE">SOURCE
        
        <dd><p><a href="Record.html#SOURCE">SOURCE</a> record class</p>
        
      
        <dt id="SPRSDE">SPRSDE
        
        <dd><p><a href="Record.html#SPRSDE">SPRSDE</a> record class</p>
        
      
        <dt id="SSBOND">SSBOND
        
        <dd><p><a href="Record.html#SSBOND">SSBOND</a> record class</p>
        
      
        <dt id="TER">TER
        
        <dd><p><a href="Record.html#TER">TER</a> record class</p>
        
      
        <dt id="TITLE">TITLE
        
        <dd><p><a href="Record.html#TITLE">TITLE</a> record class</p>
        
      
        <dt id="TURN">TURN
        
        <dd><p><a href="Record.html#TURN">TURN</a> record class</p>
        
      
        <dt id="TVECT">TVECT
        
        <dd><p><a href="Record.html#TVECT">TVECT</a> record class</p>
        
      
      </dl>
    </section>
    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-continue-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">continue?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if this record has a field type which allows  continuations.</p>
          
          

          
          <div class="method-source-code" id="continue-3F-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 287</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">continue?</span>
  <span class="ruby-ivar">@cont</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-create_definition_hash" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_definition_hash</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>creates definition hash from current classes constants</p>
          
          

          
          <div class="method-source-code" id="create_definition_hash-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 438</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">create_definition_hash</span>
  <span class="ruby-identifier">hash</span> = {}
  <span class="ruby-identifier">constants</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">x</span> = <span class="ruby-identifier">x</span>.<span class="ruby-identifier">intern</span> <span class="ruby-comment"># keep compatibility both Ruby 1.8 and 1.9</span>
    <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">x</span>] = <span class="ruby-identifier">const_get</span>(<span class="ruby-identifier">x</span>) <span class="ruby-keyword">if</span> <span class="ruby-regexp">/\A[A-Z][A-Z0-9]+\z/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">to_s</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">x</span> = <span class="ruby-identifier">const_get</span>(<span class="ruby-value">:Default</span>) <span class="ruby-keyword">then</span>
    <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">default</span> = <span class="ruby-identifier">x</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-identifier">hash</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-def_rec" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">def_rec</span><span
            class="method-args">(*ary)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates new class by given field definition The difference from <a
href="Record.html#method-c-new_direct">::new_direct</a>() is the class
created by the method does lazy evaluation.</p>

<p>Internal use only.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="def_rec-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 226</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">def_rec</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">ary</span>)
  <span class="ruby-identifier">symbolhash</span>, <span class="ruby-identifier">symbolary</span>, <span class="ruby-identifier">cont</span> = <span class="ruby-identifier">parse_field_definitions</span>(<span class="ruby-identifier">ary</span>)

  <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">symbolary</span>))
  <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">module_eval</span> {
    <span class="ruby-ivar">@definition</span> = <span class="ruby-identifier">ary</span>
    <span class="ruby-ivar">@symbols</span> = <span class="ruby-identifier">symbolhash</span>
    <span class="ruby-ivar">@cont</span> = <span class="ruby-identifier">cont</span>
  }
  <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">module_eval</span> {
    <span class="ruby-identifier">symbolary</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">define_method</span>(<span class="ruby-identifier">x</span>) { <span class="ruby-identifier">do_parse</span>; <span class="ruby-keyword">super</span>() }
    <span class="ruby-keyword">end</span>
  }
  <span class="ruby-identifier">klass</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-get_record_class" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">get_record_class</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Basically just look up the class in <a
href="Record.html#Definition">Definition</a> hash do some munging for <a
href="Record.html#JRNL">JRNL</a> and <a
href="Record.html#REMARK">REMARK</a></p>
          
          

          
          <div class="method-source-code" id="get_record_class-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 1389</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">get_record_class</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">t</span> = <span class="ruby-identifier">fetch_record_name</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-identifier">t</span> = <span class="ruby-identifier">t</span>.<span class="ruby-identifier">intern</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">empty?</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">d</span> = <span class="ruby-constant">Definition</span>[<span class="ruby-identifier">t</span>] <span class="ruby-keyword">then</span>
    <span class="ruby-keyword">return</span> <span class="ruby-identifier">d</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">case</span> <span class="ruby-identifier">t</span>
  <span class="ruby-keyword">when</span> <span class="ruby-value">:JRNL</span>
    <span class="ruby-identifier">ts</span> = <span class="ruby-identifier">str</span>[<span class="ruby-value">12</span><span class="ruby-operator">..</span><span class="ruby-value">15</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>
    <span class="ruby-identifier">ts</span> = <span class="ruby-identifier">ts</span>.<span class="ruby-identifier">intern</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">ts</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">d</span> = <span class="ruby-constant">Jrnl</span><span class="ruby-operator">::</span><span class="ruby-constant">Definition</span>[<span class="ruby-identifier">ts</span>]
  <span class="ruby-keyword">when</span> <span class="ruby-value">:REMARK</span>
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">str</span>[<span class="ruby-value">7</span><span class="ruby-operator">..</span><span class="ruby-value">9</span>].<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword">when</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">ts</span> = <span class="ruby-identifier">str</span>[<span class="ruby-value">12</span><span class="ruby-operator">..</span><span class="ruby-value">15</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>
      <span class="ruby-identifier">ts</span> = <span class="ruby-identifier">ts</span>.<span class="ruby-identifier">intern</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">ts</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">d</span> = <span class="ruby-constant">Remark1</span><span class="ruby-operator">::</span><span class="ruby-constant">Definition</span>[<span class="ruby-identifier">ts</span>]
    <span class="ruby-keyword">when</span> <span class="ruby-value">2</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">str</span>[<span class="ruby-value">28</span><span class="ruby-operator">..</span><span class="ruby-value">37</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39;ANGSTROMS.&#39;</span> <span class="ruby-keyword">then</span>
        <span class="ruby-identifier">d</span> = <span class="ruby-constant">Remark2</span><span class="ruby-operator">::</span><span class="ruby-constant">ANGSTROMS</span>
      <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">str</span>[<span class="ruby-value">22</span><span class="ruby-operator">..</span><span class="ruby-value">37</span>] <span class="ruby-operator">==</span> <span class="ruby-string">&#39; NOT APPLICABLE.&#39;</span> <span class="ruby-keyword">then</span>
        <span class="ruby-identifier">d</span> = <span class="ruby-constant">Remark2</span><span class="ruby-operator">::</span><span class="ruby-constant">NOT_APPLICABLE</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-identifier">d</span> = <span class="ruby-constant">Remark2</span><span class="ruby-operator">::</span><span class="ruby-constant">Default</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">d</span> = <span class="ruby-constant">RemarkN</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-comment"># unknown field</span>
    <span class="ruby-identifier">d</span> = <span class="ruby-constant">Default</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">d</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-new_direct" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new_direct</span><span
            class="method-args">(*ary)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Creates new class by given field definition.</p>

<p>Internal use only.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="new_direct-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 257</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new_direct</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">ary</span>)
  <span class="ruby-identifier">symbolhash</span>, <span class="ruby-identifier">symbolary</span>, <span class="ruby-identifier">cont</span> = <span class="ruby-identifier">parse_field_definitions</span>(<span class="ruby-identifier">ary</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">cont</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-string">&#39;continuation not allowed. please use def_rec instead&#39;</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword">self</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">symbolary</span>))
  <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">module_eval</span> {
    <span class="ruby-ivar">@definition</span> = <span class="ruby-identifier">ary</span>
    <span class="ruby-ivar">@symbols</span> = <span class="ruby-identifier">symbolhash</span>
    <span class="ruby-ivar">@cont</span> = <span class="ruby-identifier">cont</span>
  }
  <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">module_eval</span> {
    <span class="ruby-identifier">define_method</span>(<span class="ruby-value">:initialize_from_string</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">str</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">r</span> = <span class="ruby-keyword">super</span>(<span class="ruby-identifier">str</span>)
      <span class="ruby-identifier">do_parse</span>
      <span class="ruby-identifier">r</span>
    }
  }
  <span class="ruby-identifier">klass</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-new_inherit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new_inherit</span><span
            class="method-args">(klass)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>creates new class which inherits given class.</p>
          
          

          
          <div class="method-source-code" id="new_inherit-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 244</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">new_inherit</span>(<span class="ruby-identifier">klass</span>)
  <span class="ruby-identifier">newklass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">klass</span>)
  <span class="ruby-identifier">newklass</span>.<span class="ruby-identifier">module_eval</span> {
    <span class="ruby-ivar">@definition</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">module_eval</span> { <span class="ruby-ivar">@definition</span> }
    <span class="ruby-ivar">@symbols</span>    = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">module_eval</span> { <span class="ruby-ivar">@symbols</span> }
    <span class="ruby-ivar">@cont</span>       = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">module_eval</span> { <span class="ruby-ivar">@cont</span> }
  }
  <span class="ruby-identifier">newklass</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-c-symbols" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">symbols</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>symbols</p>
          
          

          
          <div class="method-source-code" id="symbols-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 280</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">symbols</span>
  <span class="ruby-comment">#p self</span>
  <span class="ruby-ivar">@symbols</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-add_continuation" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_continuation</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Internal use only.</p>

<p>Adds continuation data to the record from str if str is really the
continuation of current record. Returns self (= not nil) if str is the
continuation. Otherwaise, returns false.</p>
          
          

          
          <div class="method-source-code" id="add_continuation-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 421</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_continuation</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-comment">#Check that this record can continue</span>
  <span class="ruby-comment">#and that str has the same type and definition</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">continue?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">fetch_record_name</span>(<span class="ruby-identifier">str</span>) <span class="ruby-operator">==</span> <span class="ruby-ivar">@record_name</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">get_record_class</span>(<span class="ruby-identifier">str</span>) <span class="ruby-operator">==</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">fetch_cont</span>(<span class="ruby-identifier">str</span>) <span class="ruby-operator">&gt;=</span> <span class="ruby-value">2</span>
  <span class="ruby-comment">#If all this is OK then add onto @cont_data</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@cont_data</span>)
    <span class="ruby-ivar">@cont_data</span> = []
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@cont_data</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">str</span>
  <span class="ruby-comment"># Returns self (= not nil) if succeeded.</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-continue-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">continue?</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns true if this record has a field type which allows  continuations.</p>
          
          

          
          <div class="method-source-code" id="continue-3F-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 293</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">continue?</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">continue?</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-do_parse" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">do_parse</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>In order to speeding up processing of <a href="../PDB.html">PDB</a> file
format, fields have not been parsed before calling this method.</p>

<p>Normally, it is automatically called and you don&#39;t explicitly need to
call it .</p>
          
          

          
          <div class="method-source-code" id="do_parse-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 341</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">do_parse</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">self</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@parsed</span> <span class="ruby-keyword">or</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@str</span>
  <span class="ruby-identifier">str0</span> = <span class="ruby-ivar">@str</span>
  <span class="ruby-identifier">each_symbol</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">ranges</span><span class="ruby-operator">|</span>
    <span class="ruby-comment">#If we only have one range then pull that out</span>
    <span class="ruby-comment">#and store it in the hash</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">ranges</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">1</span> <span class="ruby-keyword">then</span>
      <span class="ruby-keyword">self</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">str0</span>[<span class="ruby-identifier">ranges</span>.<span class="ruby-identifier">first</span>])
    <span class="ruby-keyword">else</span>
      <span class="ruby-comment">#Go through each range and add the string to an array</span>
      <span class="ruby-comment">#set the hash key to point to that array</span>
      <span class="ruby-identifier">ary</span> = []
      <span class="ruby-identifier">ranges</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">ary</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">str0</span>[<span class="ruby-identifier">r</span>]) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">str0</span>[<span class="ruby-identifier">r</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">self</span>[<span class="ruby-identifier">key</span>] = <span class="ruby-identifier">ary</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span> <span class="ruby-comment">#each_symbol</span>
  <span class="ruby-comment">#If we have continuations then for each line of extra data...</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@cont_data</span>) <span class="ruby-keyword">then</span>
    <span class="ruby-ivar">@cont_data</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">str</span><span class="ruby-operator">|</span>
      <span class="ruby-comment">#Get the symbol, type and range array </span>
      <span class="ruby-identifier">each_symbol</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">ranges</span><span class="ruby-operator">|</span>
        <span class="ruby-comment">#If there&#39;s one range then grab that range</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">ranges</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">1</span> <span class="ruby-keyword">then</span>
          <span class="ruby-identifier">r1</span> = <span class="ruby-identifier">ranges</span>.<span class="ruby-identifier">first</span>
          <span class="ruby-keyword">unless</span> <span class="ruby-identifier">str</span>[<span class="ruby-identifier">r1</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>
            <span class="ruby-comment">#and concatenate the new data onto the old</span>
            <span class="ruby-identifier">v</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">str</span>[<span class="ruby-identifier">r1</span>])
            <span class="ruby-keyword">self</span>[<span class="ruby-identifier">key</span>].<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">v</span>) <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">!=</span> <span class="ruby-identifier">v</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-comment">#If there&#39;s more than one range then add to the array</span>
          <span class="ruby-identifier">ary</span> = <span class="ruby-keyword">self</span>[<span class="ruby-identifier">key</span>]
          <span class="ruby-identifier">ranges</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">ary</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">str</span>[<span class="ruby-identifier">r</span>]) <span class="ruby-keyword">unless</span> <span class="ruby-identifier">str</span>[<span class="ruby-identifier">r</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">empty?</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@parsed</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-each_symbol" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">each_symbol</span><span
            class="method-args">() { |k, x, x| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>yields the symbol(k), <a href="0">type(x</a>) and array of ranges of each
symbol.</p>
          
          

          
          <div class="method-source-code" id="each_symbol-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 299</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">each_symbol</span>
  <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">symbols</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">yield</span> <span class="ruby-identifier">k</span>, <span class="ruby-identifier">x</span>[<span class="ruby-value">0</span>], <span class="ruby-identifier">x</span>[<span class="ruby-value">1</span>]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-initialize_from_string" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">initialize_from_string</span><span
            class="method-args">(str)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>initialize this record from the given string. <em>str</em> must be a line
(in <a href="../PDB.html">PDB</a> format).</p>

<p>You can add continuation lines later using <code>add_continuation</code>
method.</p>
          
          

          
          <div class="method-source-code" id="initialize_from_string-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 323</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize_from_string</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-ivar">@str</span> = <span class="ruby-identifier">str</span>
  <span class="ruby-ivar">@record_name</span> = <span class="ruby-identifier">fetch_record_name</span>(<span class="ruby-identifier">str</span>)
  <span class="ruby-ivar">@parsed</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">self</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-inspect" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">inspect</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>same as Struct#inspect.</p>

<p>Note that <code>do_parse</code> is automatically called before
<code>inspect</code>.</p>

<p>(Warning: The <a href="Record.html#method-i-do_parse">#do_parse</a> might
sweep hidden bugs in <a href="../PDB.html">PDB</a> classes.)</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="inspect-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 456</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">inspect</span>
  <span class="ruby-identifier">do_parse</span>
  <span class="ruby-keyword">super</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-original_data" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">original_data</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Return original string (except that “n” are truncated)  for this record
(usually just @str, but sometimes add on the continuation data from other
lines. Returns an array of string.</p>
          
          

          
          <div class="method-source-code" id="original_data-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 310</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">original_data</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">defined?</span>(<span class="ruby-ivar">@cont_data</span>) <span class="ruby-keyword">then</span>
    [ <span class="ruby-ivar">@str</span>, <span class="ruby-operator">*</span><span class="ruby-ivar">@cont_data</span> ]
  <span class="ruby-keyword">else</span>
    [ <span class="ruby-ivar">@str</span> ]
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-record_name" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">record_name</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p><a href="Record.html">Record</a> name of this record, e.g. “HEADER”,
“ATOM”.</p>
          
          

          
          <div class="method-source-code" id="record_name-source">
            <pre><span class="ruby-comment"># File lib/bio/db/pdb/pdb.rb, line 408</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">record_name</span>
  <span class="ruby-ivar">@record_name</span> <span class="ruby-keyword">or</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/\:\:/</span>)[<span class="ruby-value">-1</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">upcase</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        
        <div class="aliases">
          Also aliased as: <a href="Record.html#method-i-record_type">record_type</a>
        </div>
        

        
      </div>

    
      <div id="method-i-record_type" class="method-detail method-alias">
        
        <div class="method-heading">
          <span class="method-name">record_type</span><span
            class="method-args">()</span>
          
        </div>
        

        <div class="method-description">
          
          <p>keeping compatibility with old version</p>
          
          

          
        </div>

        

        
        <div class="aliases">
          Alias for: <a href="Record.html#method-i-record_name">record_name</a>
        </div>
        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.0.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

