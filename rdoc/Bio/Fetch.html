<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Bio::Fetch - BioRuby API documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/navigation.js" defer></script>
<script src="../js/search.js" defer></script>
<script src="../js/search_index.js" defer></script>
<script src="../js/searcher.js" defer></script>
<script src="../js/darkfish.js" defer></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="#class-Bio::Fetch-label-DESCRIPTION">DESCRIPTION</a>
    <li><a href="#class-Bio::Fetch-label-USAGE">USAGE</a>
  </ul>
</div>


  <div id="class-metadata">
    
    
<div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  <p class="link"><a href="../Object.html">Object</a>
</div>

    
    
    
<!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    <li ><a href="#method-c-new">::new</a>
    <li ><a href="#method-i-databases">#databases</a>
    <li ><a href="#method-i-fetch">#fetch</a>
    <li ><a href="#method-i-formats">#formats</a>
    <li ><a href="#method-i-get_by_id">#get_by_id</a>
    <li ><a href="#method-i-maxids">#maxids</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Bio::Fetch">
  <h1 id="class-Bio::Fetch" class="class">
    class Bio::Fetch
  </h1>

  <section class="description">
    
<h1 id="class-Bio::Fetch-label-DESCRIPTION">DESCRIPTION<span><a href="#class-Bio::Fetch-label-DESCRIPTION">&para;</a> <a href="#top">&uarr;</a></span></h1>

<p>The <a href="Fetch.html"><code>Bio::Fetch</code></a> class provides an interface to dbfetch servers. Given a database name and an accession number, these servers return the associated record. For example, for the embl database on the <a href="Fetch/EBI.html"><code>EBI</code></a>, that would be a nucleic or amino acid sequence.</p>

<p>Possible dbfetch servers include:</p>
<ul><li>
<p><a href="http://www.ebi.ac.uk/Tools/dbfetch/dbfetch">www.ebi.ac.uk/Tools/dbfetch/dbfetch</a></p>
</li></ul>

<p>Note that old URL <a href="http://www.ebi.ac.uk/cgi-bin/dbfetch">www.ebi.ac.uk/cgi-bin/dbfetch</a> still alives probably because of compatibility, but using the new URL is recommended.</p>

<p>Historically, there were other dbfetch servers including:</p>
<ul><li>
<p><a href="http://bioruby.org/cgi-bin/biofetch.rb">bioruby.org/cgi-bin/biofetch.rb</a> (default before BioRuby 1.4)</p>
</li></ul>

<p>But they are unavailable now.</p>

<p>If youâ€™re behind a proxy server, be sure to set your HTTP_PROXY environment variable accordingly.</p>

<h1 id="class-Bio::Fetch-label-USAGE">USAGE<span><a href="#class-Bio::Fetch-label-USAGE">&para;</a> <a href="#top">&uarr;</a></span></h1>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">&#39;bio&#39;</span>

<span class="ruby-comment"># Retrieve the sequence of accession number M33388 from the EMBL</span>
<span class="ruby-comment"># database.</span>
<span class="ruby-identifier">server</span> = <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">Fetch</span><span class="ruby-operator">::</span><span class="ruby-constant">EBI</span>.<span class="ruby-identifier">new</span>  <span class="ruby-comment">#uses EBI server</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">server</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;ena_sequence&#39;</span>,<span class="ruby-string">&#39;M33388&#39;</span>)

<span class="ruby-comment"># database name &quot;embl&quot; can also be used though it is not officially listed</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">server</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;embl&#39;</span>,<span class="ruby-string">&#39;M33388&#39;</span>)

<span class="ruby-comment"># Do the same thing with explicitly giving the URL.</span>
<span class="ruby-identifier">server</span> = <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">Fetch</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">Fetch</span><span class="ruby-operator">::</span><span class="ruby-constant">EBI</span><span class="ruby-operator">::</span><span class="ruby-constant">URL</span>)  <span class="ruby-comment">#uses EBI server</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">server</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;ena_sequence&#39;</span>,<span class="ruby-string">&#39;M33388&#39;</span>)

<span class="ruby-comment"># Do the same thing without creating a Bio::Fetch::EBI object.</span>
<span class="ruby-identifier">puts</span> <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">Fetch</span><span class="ruby-operator">::</span><span class="ruby-constant">EBI</span>.<span class="ruby-identifier">query</span>(<span class="ruby-string">&#39;ena_sequence&#39;</span>,<span class="ruby-string">&#39;M33388&#39;</span>)

<span class="ruby-comment"># To know what databases are available on the dbfetch server:</span>
<span class="ruby-identifier">server</span> = <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">Fetch</span><span class="ruby-operator">::</span><span class="ruby-constant">EBI</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">server</span>.<span class="ruby-identifier">databases</span>

<span class="ruby-comment"># Some databases provide their data in different formats (e.g. &#39;fasta&#39;,</span>
<span class="ruby-comment"># &#39;genbank&#39; or &#39;embl&#39;). To check which formats are supported by a given</span>
<span class="ruby-comment"># database:</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">server</span>.<span class="ruby-identifier">formats</span>(<span class="ruby-string">&#39;embl&#39;</span>)
</pre>

  </section>

  <section id="5Buntitled-5D" class="documentation-section">



    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      <div id="attribute-i-database" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">database</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        <p>The default database to query</p>
        </div>
      </div>
    </section>


     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

      <div id="method-c-new" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(url = nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Create a new <a href="Fetch.html"><code>Bio::Fetch</code></a> server object that can subsequently be queried using the <a href="Fetch.html#method-i-fetch"><code>Bio::Fetch#fetch</code></a> method.</p>

<p>You must specify <em>url</em> of a server. The preset default server is deprecated.</p>

<p>If you want to use a server without explicitly specifying the URL, use <a href="Fetch/EBI.html#method-c-new"><code>Bio::Fetch::EBI.new</code></a> that uses <a href="Fetch/EBI.html"><code>EBI</code></a> Dbfetch server.</p>
<hr>

<p><strong>Arguments</strong>:</p>
<ul><li>
<p><em>url</em>: URL of dbfetch server. (no default value)</p>
</li></ul>
<dl class="rdoc-list note-list"><dt><strong>Returns</strong>
<dd>
<p><a href="Fetch.html"><code>Bio::Fetch</code></a> object</p>
</dd></dl>

          <div class="method-source-code" id="new-source">
            <pre>    <span class="ruby-comment"># File lib/bio/io/fetch.rb</span>
<span class="line-num">140</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">url</span> = <span class="ruby-keyword">nil</span>)
<span class="line-num">141</span>   <span class="ruby-keyword">unless</span> <span class="ruby-identifier">url</span> <span class="ruby-keyword">then</span>
<span class="line-num">142</span>     <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-string">&quot;No server URL is given in Bio::Fetch.new. The default server URL value have been deprecated. You must explicitly specify the url or use Bio::Fetch::EBI for using EBI Dbfetch.&quot;</span>
<span class="line-num">143</span>   <span class="ruby-keyword">end</span>
<span class="line-num">144</span>   <span class="ruby-ivar">@url</span> = <span class="ruby-identifier">url</span>
<span class="line-num">145</span> <span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

      <div id="method-i-databases" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">databases</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Using this method, the user can ask a dbfetch server what databases it supports. This would normally be the first step youâ€™d take when you use a dbfetch server for the first time. Example:</p>

<pre class="ruby"><span class="ruby-identifier">server</span> = <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">Fetch</span>.<span class="ruby-identifier">new</span>()
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">server</span>.<span class="ruby-identifier">databases</span> <span class="ruby-comment"># returns &quot;aa aax bl cpd dgenes dr ec eg emb ...&quot;</span>
</pre>

<p>This method works for <a href="Fetch/EBI.html"><code>EBI</code></a> Dbfetch server (and for the bioruby dbfetch server). Not all servers support this method.</p>
<hr>
<dl class="rdoc-list note-list"><dt><strong>Returns</strong>
<dd>
<p>array of database names</p>
</dd></dl>

          <div class="method-source-code" id="databases-source">
            <pre>    <span class="ruby-comment"># File lib/bio/io/fetch.rb</span>
<span class="line-num">192</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">databases</span>
<span class="line-num">193</span>   <span class="ruby-identifier">_get_single</span>(<span class="ruby-string">&#39;info&#39;</span>, <span class="ruby-string">&#39;dbs&#39;</span>).<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/\s+/</span>)
<span class="line-num">194</span> <span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-fetch" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">fetch</span><span
            class="method-args">(db, id, style = &#39;raw&#39;, format = nil)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p><a href="Fetch.html"><code>Fetch</code></a> a database entry as specified by database (db), entry id (id), â€˜rawâ€™ text or â€˜htmlâ€™ (style), and format.</p>

<p>Examples:</p>

<pre class="ruby"><span class="ruby-identifier">server</span> = <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">Fetch</span>.<span class="ruby-identifier">new</span>(<span class="ruby-string">&#39;http://www.ebi.ac.uk/cgi-bin/dbfetch&#39;</span>)
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">server</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;embl&#39;</span>,<span class="ruby-string">&#39;M33388&#39;</span>,<span class="ruby-string">&#39;raw&#39;</span>,<span class="ruby-string">&#39;fasta&#39;</span>)
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">server</span>.<span class="ruby-identifier">fetch</span>(<span class="ruby-string">&#39;refseq&#39;</span>,<span class="ruby-string">&#39;NM_12345&#39;</span>,<span class="ruby-string">&#39;html&#39;</span>,<span class="ruby-string">&#39;embl&#39;</span>)
</pre>
<hr>

<p><strong>Arguments</strong>:</p>
<ul><li>
<p><em>database</em>: name of database to query (see <a href="Fetch.html#method-i-databases"><code>Bio::Fetch#databases</code></a> to get list of supported databases)</p>
</li><li>
<p><em>id</em>: single ID or ID list separated by commas or white space</p>
</li><li>
<p><em>style</em>: [raw|html] (default = â€˜rawâ€™)</p>
</li><li>
<p><em>format</em>: name of output format (see <a href="Fetch.html#method-i-formats"><code>Bio::Fetch#formats</code></a>)</p>
</li></ul>

          <div class="method-source-code" id="fetch-source">
            <pre>    <span class="ruby-comment"># File lib/bio/io/fetch.rb</span>
<span class="line-num">172</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">fetch</span>(<span class="ruby-identifier">db</span>, <span class="ruby-identifier">id</span>, <span class="ruby-identifier">style</span> = <span class="ruby-string">&#39;raw&#39;</span>, <span class="ruby-identifier">format</span> = <span class="ruby-keyword">nil</span>)
<span class="line-num">173</span>   <span class="ruby-identifier">query</span> = [ [ <span class="ruby-string">&#39;db&#39;</span>,    <span class="ruby-identifier">db</span> ],
<span class="line-num">174</span>             [ <span class="ruby-string">&#39;id&#39;</span>,    <span class="ruby-identifier">id</span> ],
<span class="line-num">175</span>             [ <span class="ruby-string">&#39;style&#39;</span>, <span class="ruby-identifier">style</span> ] ]
<span class="line-num">176</span>   <span class="ruby-identifier">query</span>.<span class="ruby-identifier">push</span>([ <span class="ruby-string">&#39;format&#39;</span>, <span class="ruby-identifier">format</span> ]) <span class="ruby-keyword">if</span> <span class="ruby-identifier">format</span>
<span class="line-num">177</span>   
<span class="line-num">178</span>   <span class="ruby-identifier">_get</span>(<span class="ruby-identifier">query</span>)
<span class="line-num">179</span> <span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-formats" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">formats</span><span
            class="method-args">(database = @database)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Lists the formats that are available for a given database. Like the <a href="Fetch.html#method-i-databases"><code>Bio::Fetch#databases</code></a> method, not all servers support this method. This method is available on the <a href="Fetch/EBI.html"><code>EBI</code></a> Dbfetch server (and on the bioruby dbfetch server).</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">server</span> = <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">Fetch</span><span class="ruby-operator">::</span><span class="ruby-constant">EBI</span>.<span class="ruby-identifier">new</span>()
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">server</span>.<span class="ruby-identifier">formats</span>(<span class="ruby-string">&#39;embl&#39;</span>) <span class="ruby-comment"># returns [ &quot;default&quot;, &quot;annot&quot;, ... ]</span>
</pre>
<hr>

<p><strong>Arguments</strong>:</p>
<ul><li><dl class="rdoc-list note-list"><dt><em>database</em>
<dd>
<p>name of database you want the supported formats for</p>
</dd></dl>
</li></ul>
<dl class="rdoc-list note-list"><dt><strong>Returns</strong>
<dd>
<p>array of formats</p>
</dd></dl>

          <div class="method-source-code" id="formats-source">
            <pre>    <span class="ruby-comment"># File lib/bio/io/fetch.rb</span>
<span class="line-num">208</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">formats</span>(<span class="ruby-identifier">database</span> = <span class="ruby-ivar">@database</span>)
<span class="line-num">209</span>   <span class="ruby-keyword">if</span> <span class="ruby-identifier">database</span>
<span class="line-num">210</span>     <span class="ruby-identifier">query</span> = [ [ <span class="ruby-string">&#39;info&#39;</span>, <span class="ruby-string">&#39;formats&#39;</span> ],
<span class="line-num">211</span>               [ <span class="ruby-string">&#39;db&#39;</span>,   <span class="ruby-identifier">database</span>  ] ]
<span class="line-num">212</span>     <span class="ruby-identifier">_get</span>(<span class="ruby-identifier">query</span>).<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp">/\s+/</span>)
<span class="line-num">213</span>   <span class="ruby-keyword">end</span>
<span class="line-num">214</span> <span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-get_by_id" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">get_by_id</span><span
            class="method-args">(id)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Get raw database entry by id. This method lets the <a href="Registry.html"><code>Bio::Registry</code></a> class use <a href="Fetch.html"><code>Bio::Fetch</code></a> objects.</p>

          <div class="method-source-code" id="get_by_id-source">
            <pre>    <span class="ruby-comment"># File lib/bio/io/fetch.rb</span>
<span class="line-num">155</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">get_by_id</span>(<span class="ruby-identifier">id</span>)
<span class="line-num">156</span>   <span class="ruby-identifier">fetch</span>(<span class="ruby-ivar">@database</span>, <span class="ruby-identifier">id</span>)
<span class="line-num">157</span> <span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

      <div id="method-i-maxids" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">maxids</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>A dbfetch server will only return entries up to a given maximum number. This method retrieves that number from the server. As for the databases and formats methods, not all servers support the maxids method. This method is available on the <a href="Fetch/EBI.html"><code>EBI</code></a> Dbfetch server (and on the bioruby dbfetch server).</p>

<p>Example:</p>

<pre class="ruby"><span class="ruby-identifier">server</span> = <span class="ruby-constant">Bio</span><span class="ruby-operator">::</span><span class="ruby-constant">Fetch</span><span class="ruby-operator">::</span><span class="ruby-constant">EBI</span>.<span class="ruby-identifier">new</span>
<span class="ruby-identifier">puts</span> <span class="ruby-identifier">server</span>.<span class="ruby-identifier">maxids</span> <span class="ruby-comment"># currently returns 200</span>
</pre>
<hr>

<p><strong>Arguments</strong>: none</p>
<dl class="rdoc-list note-list"><dt><strong>Returns</strong>
<dd>
<p>number</p>
</dd></dl>

          <div class="method-source-code" id="maxids-source">
            <pre>    <span class="ruby-comment"># File lib/bio/io/fetch.rb</span>
<span class="line-num">228</span> <span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">maxids</span>
<span class="line-num">229</span>   <span class="ruby-identifier">_get_single</span>(<span class="ruby-string">&#39;info&#39;</span>, <span class="ruby-string">&#39;maxids&#39;</span>).<span class="ruby-identifier">to_i</span>
<span class="line-num">230</span> <span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.4.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

